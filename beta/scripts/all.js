function onLoad(){var svg=document.createElementNS("http://www.w3.org/2000/svg","svg");svg.setAttribute("width",window.innerWidth),svg.setAttribute("height",window.innerHeight),document.querySelector("#about").appendChild(svg);var unitSize=(window.innerWidth+window.innerHeight)/15;numPointsX=Math.ceil(window.innerWidth/unitSize)+1,numPointsY=Math.ceil(window.innerHeight/unitSize)+1,unitWidth=Math.ceil(window.innerWidth/(numPointsX-1)),unitHeight=Math.ceil(window.innerHeight/(numPointsY-1)),points=[];for(var y=0;y<numPointsY;y++)for(var x=0;x<numPointsX;x++)points.push({x:unitWidth*x,y:unitHeight*y,originX:unitWidth*x,originY:unitHeight*y});randomize();for(var i=0;i<points.length;i++)if(points[i].originX!=unitWidth*(numPointsX-1)&&points[i].originY!=unitHeight*(numPointsY-1))for(var topLeftX=points[i].x,topLeftY=points[i].y,topRightX=points[i+1].x,topRightY=points[i+1].y,bottomLeftX=points[i+numPointsX].x,bottomLeftY=points[i+numPointsX].y,bottomRightX=points[i+numPointsX+1].x,bottomRightY=points[i+numPointsX+1].y,rando=Math.floor(2*Math.random()),n=0;n<2;n++){var polygon=document.createElementNS(svg.namespaceURI,"polygon");0==rando?0==n?(polygon.point1=i,polygon.point2=i+numPointsX,polygon.point3=i+numPointsX+1,polygon.setAttribute("points",topLeftX+","+topLeftY+" "+bottomLeftX+","+bottomLeftY+" "+bottomRightX+","+bottomRightY)):1==n&&(polygon.point1=i,polygon.point2=i+1,polygon.point3=i+numPointsX+1,polygon.setAttribute("points",topLeftX+","+topLeftY+" "+topRightX+","+topRightY+" "+bottomRightX+","+bottomRightY)):1==rando&&(0==n?(polygon.point1=i,polygon.point2=i+numPointsX,polygon.point3=i+1,polygon.setAttribute("points",topLeftX+","+topLeftY+" "+bottomLeftX+","+bottomLeftY+" "+topRightX+","+topRightY)):1==n&&(polygon.point1=i+numPointsX,polygon.point2=i+1,polygon.point3=i+numPointsX+1,polygon.setAttribute("points",bottomLeftX+","+bottomLeftY+" "+topRightX+","+topRightY+" "+bottomRightX+","+bottomRightY))),polygon.setAttribute("fill","rgba(0,0,0,"+Math.random()/3+")"),polygon.setAttribute("style","animation-delay:"+2*Math.random()+"s");var animate=document.createElementNS("http://www.w3.org/2000/svg","animate");animate.setAttribute("fill","freeze"),animate.setAttribute("attributeName","points"),animate.setAttribute("dur",refreshDuration+"ms"),animate.setAttribute("calcMode","linear"),polygon.appendChild(animate),svg.appendChild(polygon)}refresh()}function randomize(){for(var i=0;i<points.length;i++)0!=points[i].originX&&points[i].originX!=unitWidth*(numPointsX-1)&&(points[i].x=points[i].originX+Math.random()*unitWidth-unitWidth/2),0!=points[i].originY&&points[i].originY!=unitHeight*(numPointsY-1)&&(points[i].y=points[i].originY+Math.random()*unitHeight-unitHeight/2)}function refresh(){randomize();for(var i=0;i<document.querySelector("#about svg").childNodes.length;i++){var polygon=document.querySelector("#about svg").childNodes[i],animate=polygon.childNodes[0];animate.getAttribute("to")&&animate.setAttribute("from",animate.getAttribute("to")),animate.setAttribute("to",points[polygon.point1].x+","+points[polygon.point1].y+" "+points[polygon.point2].x+","+points[polygon.point2].y+" "+points[polygon.point3].x+","+points[polygon.point3].y),animate.beginElement()}refreshTimeout=setTimeout(function(){refresh()},refreshDuration)}function onResize(){document.querySelector("#about svg").remove(),clearTimeout(refreshTimeout),onLoad()}function checkSize(){var prop=$(".responsive-beacon").css("width");return"10px"==prop?size="mobile":"20px"==prop?size="tablet":"30px"==prop?size="laptop":"40px"==prop&&(size="desktop"),DEBUG&&console.log("Media = "+size),size}function trigger(id,scrollOffset){var btn=".trigger--"+id;$(btn).click(function(e){e.preventDefault(),$("body").addClass("transition"),$("body").addClass("transition--"+id),$("html, body").animate({scrollTop:$("#"+id).offset().top-scrollOffset},600);var href=$(btn).attr("href");void 0===href&&(href=$(btn).attr("data-href")),DEBUG&&console.log(href)})}!function($,sr){var debounce=function(func,threshold,execAsap){var timeout;return function(){function delayed(){execAsap||func.apply(obj,args),timeout=null}var obj=this,args=arguments;timeout?clearTimeout(timeout):execAsap&&func.apply(obj,args),timeout=setTimeout(delayed,threshold||100)}};jQuery.fn[sr]=function(fn){return fn?this.bind("resize",debounce(fn)):this.trigger(sr)}}(jQuery,"smartresize");var refreshDuration=1e4,refreshTimeout,numPointsX,numPointsY,unitWidth,unitHeight,points,DEBUG=!0,size="";tList=["about","sim","xtly","central","puppy"],$(function(){$('nav a[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var target=$(this.hash);if(target=target.length?target:$("[name="+this.hash.slice(1)+"]"),target.length)return $("html, body").animate({scrollTop:target.offset().top},800),setTimeout(function(){$("#nav").removeClass("nav-is-visible")},100),!1}})}),$(document).ready(function(){DEBUG&&$("body").prepend('<div class="media-tag"></div>');var cSize=checkSize();for(i=0;i<tList.length;i++)trigger(tList[i],0);$(window).smartresize(function(){newSize=checkSize(),newSize!=cSize&&(cSize=newSize,DEBUG&&console.log("Media = "+cSize))});var nav=$("#nav"),navTrigger=$(".nav-trigger");navTrigger.on("click",function(event){event.preventDefault(),nav.toggleClass("nav-is-visible")}),$(window).scrollTop()<100?nav.addClass("nav-at-top"):nav.addClass("nav-not-at-top"),$(window).on("scroll",{previousTop:0},function(){var currentTop=$(window).scrollTop();currentTop<100?(nav.addClass("nav-at-top"),nav.removeClass("nav-not-at-top"),"mobile"!=cSize&&nav.removeClass("nav-is-visible")):(nav.removeClass("nav-at-top"),nav.addClass("nav-not-at-top")),this.previousTop=currentTop})});